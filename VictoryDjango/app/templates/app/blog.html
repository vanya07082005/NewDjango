{% extends "app/layout.html" %}
{% load static %}
{% block content %}
<style>
    h1 {
        background-color: rgb(120, 166, 177);
        color: white;
        text-shadow: 3px 3px 1px rgb(0, 0, 0);
        margin: 20px 0px;
        padding: 3px 10px;
    }

    .sup {
        background: linear-gradient(to right,rgb(163 227 237),rgb(138, 234, 178),rgb(231, 224, 237));
        margin: 10px 0px;
        display: flex;
        justify-content: flex-start;
        align-items: flex-start;
        width: 100%;
        padding: 10px 15px 10px 15px;
    }

        .sup img {
            width: 200px;
            height: 180px;
            margin: 10px 30px 10px 0px;
            border: 5px solid rgb(163, 168, 255);
            padding: 10px;
            border-radius: 10px;
            object-fit: contain;
            background-color: #ffffff;
        }

            .sup img:hover {
                box-shadow: 5px 15px 35px rgb(163, 168, 255);
                transform: translateY(10px);
                transition: 0.1s;
            }

    /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ */
    .search-container {
        margin: 20px 0;
        padding: 15px;
        background: linear-gradient(to right, #e3f2fd, #f3e5f5);
        border-radius: 10px;
        display: flex;
        gap: 10px;
        align-items: center;
    }

    .search-input {
        flex: 1;
        padding: 10px 15px;
        border: 2px solid rgb(120, 166, 177);
        border-radius: 25px;
        font-size: 16px;
        outline: none;
    }

        .search-input:focus {
            box-shadow: 0 0 10px rgba(120, 166, 177, 0.5);
        }

    .search-btn {
        background-color: rgb(120, 166, 177);
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 25px;
        cursor: pointer;
        font-size: 16px;
    }

        .search-btn:hover {
            background-color: rgb(100, 146, 157);
            transform: translateY(-2px);
            transition: 0.2s;
        }

    .search-results {
        margin: 10px 0;
        padding: 10px;
        background: linear-gradient(to right, #a1c0d7, #e5c4ea);
        border-radius: 5px;
        border-left: 4px solid #25a6ca;
    }
</style>

<h1>{{ title }}</h1>

<!-- –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ -->
<div class="search-container">
    <form method="get" action="{% url 'blog' %}" style="display: flex; width: 100%; gap: 10px;">
        <input type="text"
               name="search"
               class="search-input"
               placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é..."
               value="{{ search_query }}"
               autocomplete="off">
        <button type="submit" class="search-btn">
            üîç –ü–æ–∏—Å–∫
        </button>
    </form>

</div>

<!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ -->
{% if search_query %}
<div class="search-results">
    <strong>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –¥–ª—è: "{{ search_query }}"</strong>
    <p>–ù–∞–π–¥–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤: {{ posts|length }}</p>
    {% if posts|length == 0 %}
    <p>üòî –¢–æ–≤–∞—Ä—ã –ø–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
    {% endif %}
</div>
{% endif %}

<!-- –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ -->
{% for post in posts %}
<div class="sup">
    <a href="{% url 'blogpost' parametr=post.id %}">
        <img src="{{ post.image.url }}" alt="–ö–∞—Ä—Ç–∏–Ω–∫–∞ —Ç–æ–≤–∞—Ä–∞" />
    </a>
    <div>
        <h2>{{ post.title }}</h2>
        <h6><i>–¢–æ–≤–∞—Ä –≤—ã–≤–µ–¥–µ–Ω –Ω–∞ —Ä—ã–Ω–æ–∫ {{ post.posted }}</i></h6>
        <p>{{ post.description }}</p>
        <p><b style="background-color:rgb(175, 245, 209)">{{ post.price }} —Ä—É–±</b></p>
        <p><a href="{% url 'blogpost' parametr=post.id %}">–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Ç–æ–≤–∞—Ä–µ</a></p>
    </div>
</div>
{% empty %}
<!-- –°–æ–æ–±—â–µ–Ω–∏–µ –µ—Å–ª–∏ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–µ—Ç -->
<div style="text-align: center; padding: 40px; background-color: #f8f9fa; border-radius: 10px;">
    <h3>üòî –¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
    <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –∏–ª–∏ <a href="{% url 'blog' %}">–ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã</a></p>
</div>
{% endfor %}

<!-- –ö–Ω–æ–ø–∫–∞ "–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ" –µ—Å–ª–∏ –µ—Å—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å -->
{% if search_query and posts|length > 0 %}
<div style="text-align: center; margin: 20px 0;">
    <a href="{% url 'blog' %}" class="btn btn-default" style="padding: 10px 20px;">
        –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã
    </a>
</div>
{% endif %}

{% endblock %}